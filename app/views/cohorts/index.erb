<%= link_to('Create a new cohort', new_cohort_path) %>

<h3>Existing cohorts</h3>
<table>
  <tr>
    <th>Name</th>
    <th>Starts on</th>
    <th>Ends on</th>
    <th>Creator</th>
    <th>Signup Link (click to copy)</th>
    <th>Projects</th>
  </tr>
  <% @cohorts.each do |cohort| %>
    <tr>
      <td><%= cohort.name %></td>
      <td><%= cohort.starts_on %></td>
      <td><%= cohort.ends_on %></td>
      <td><%= cohort.creator.email %></td>
      <td class="copy-signup-link"><%= cohort.signup_link(new_user_url) %></td>
      <td><%= link_to("See projects for this cohort", "/cohorts/#{cohort.id}/projects") %>
    </tr>
  <% end %>
</table>

<script type="text/javascript">
  document.querySelectorAll('.copy-signup-link').forEach(function(link) {
    link.addEventListener('click', function(e) {
      navigator.clipboard.writeText(e.target.textContent)
    })
  })
</script>

